---
title: JavaScript中的Number与精度
date: 2021-02-23 16:26:04
tags: [精度]
categories: JavaScript
---

## 概述
JavaScript的数字都是number类型的，不管是整数还是浮点数都以IEEE754标准中的双精度的格式存储在计算机中

小数部分乘2，取整数部分
0.5*2=1.0

    E =  (-1)^1 × M × 2^E

- (-1)^s表示符号位，当s=0，V为正数；当s=1，V为负数。
- M表示有效数字，大于等于1，小于2。
- 2^E表示指数位

## 有符号证书与无符号整数
ECMAScript 整数有两种类型，即有符号整数（允许用正数和负数）和无符号整数（只允许用正数）。在 ECMAScript 中，所有整数字面量默认都是有符号整数。

有符号整数使用 31 位表示整数的数值，用第 32 位表示整数的符号，0 表示正数，1 表示负数。数值范围从 -2147483648 到 2147483647。


- JavaScript 能够准确表示的整数范围在-2^53到2^53之间（不含两个端点），超过这个范围，无法精确表示这个值。

### 最大值
也就是说指数的范围是 [-1023,1024] 

因此，这种存储结构能够表示的数值范围为 2^1024 到 2^-1023 ，超出这个范围的数无法表示 。2^1024  和 2^-1023  转换为科学计数法如下所示：

1.7976931348623157 × 10^308

### 最大安全数
为什么最大安全整数是2^53-1？前面说到了JavaScript浮点数存储是52位尾数位，但是因为科学计数法小数点左侧的1会在存储时省去，所以52位尾数+省去的1位=53个可表示的位数。

二进制的53位全是1时转换为十进制既是：2^53-1=9007199254740991

## 参考
- [维基百科-IEEE 754](https://zh.wikipedia.org/wiki/IEEE_754#64%E4%BD%8D%E9%9B%99%E7%B2%BE%E5%BA%A6)
- [IEEE754 浮点数格式 与 Javascript number 的特性](https://segmentfault.com/a/1190000008268668)
- [IEEE 754标准-简书](https://www.jianshu.com/p/7c636d8f18d5)
- [IEEE 754标准在线可视化](http://bartaz.github.io/ieee754-visualization/)
- [知乎-前端应该知道的JavaScript浮点数和大数的原理](https://zhuanlan.zhihu.com/p/66949640)