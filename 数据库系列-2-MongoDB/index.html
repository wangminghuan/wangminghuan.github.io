<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://static.wangminghuan.cn/cdn/fontawesome@5.15.3/all.min.css">
  <link rel="stylesheet" href="https://static.wangminghuan.cn/cdn/animejs@3.2.1/animate.min.css">

<script class="next-config" data-name="main" type="application/json">{"hostname":"wangminghuan.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.10.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

  <meta name="description" content="概述NoSQL用于超大规模数据的存储。（例如谷歌或Facebook每天为他们的用户收集万亿比特的数据）。这些类型的数据存储不需要固定的模式，无需多余操作就可以横向扩展。 随着前端技术的不断迭代，代表MongoDB（文档数据库），Express（Web服务器），AngularJS（前端框架）和Node.js（后端JavaScript运行时）的MEAN堆栈开始流行。除其他原因外，MEAN堆栈很有吸引力">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库系列-2-MongoDB">
<meta property="og:url" content="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/index.html">
<meta property="og:site_name" content="WMH&#39;s Blog">
<meta property="og:description" content="概述NoSQL用于超大规模数据的存储。（例如谷歌或Facebook每天为他们的用户收集万亿比特的数据）。这些类型的数据存储不需要固定的模式，无需多余操作就可以横向扩展。 随着前端技术的不断迭代，代表MongoDB（文档数据库），Express（Web服务器），AngularJS（前端框架）和Node.js（后端JavaScript运行时）的MEAN堆栈开始流行。除其他原因外，MEAN堆栈很有吸引力">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/1.png">
<meta property="og:image" content="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/2.png">
<meta property="og:image" content="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/3.png">
<meta property="og:image" content="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/4.png">
<meta property="og:image" content="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/5.png">
<meta property="og:image" content="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/6.png">
<meta property="og:image" content="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/7.png">
<meta property="og:image" content="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/8.png">
<meta property="og:image" content="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/9.png">
<meta property="og:image" content="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/10.png">
<meta property="article:published_time" content="2020-01-21T10:02:36.000Z">
<meta property="article:modified_time" content="2022-05-17T10:04:10.869Z">
<meta property="article:author" content="WMH">
<meta property="article:tag" content="noSql">
<meta property="article:tag" content="MongoDB">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/1.png">


<link rel="canonical" href="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/","path":"数据库系列-2-MongoDB/","title":"数据库系列-2-MongoDB"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>数据库系列-2-MongoDB | WMH's Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">WMH's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-主页"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>主页</a></li>
        <li class="menu-item menu-item-标签"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-分类"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-归档"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MongoDB%E7%9A%84%E5%AE%89%E8%A3%85"><span class="nav-number">2.</span> <span class="nav-text">MongoDB的安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%8E%8B%E7%BC%A9%E5%8C%85"><span class="nav-number">2.1.</span> <span class="nav-text">获取压缩包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%8E%8B"><span class="nav-number">2.2.</span> <span class="nav-text">解压</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%86%E8%A7%A3%E5%8E%8B%E5%8C%85%E6%8B%B7%E8%B4%9D%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95"><span class="nav-number">2.3.</span> <span class="nav-text">将解压包拷贝到指定目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E8%B7%AF%E5%BE%84"><span class="nav-number">2.4.</span> <span class="nav-text">创建数据存储路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE"><span class="nav-number">2.5.</span> <span class="nav-text">修改配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8"><span class="nav-number">2.6.</span> <span class="nav-text">通过指定配置启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mongod-%E4%B8%8E-mongo-%E5%91%BD%E4%BB%A4"><span class="nav-number">2.7.</span> <span class="nav-text">mongod 与 mongo 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#win10-%E4%B8%8B%E7%9A%84%E5%AE%89%E8%A3%85"><span class="nav-number">2.8.</span> <span class="nav-text">win10 下的安装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MongoDB%E4%B8%AD%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-number">3.</span> <span class="nav-text">MongoDB中的概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MongoDB%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">4.</span> <span class="nav-text">MongoDB的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7%E8%BF%9E%E6%8E%A5"><span class="nav-number">4.1.</span> <span class="nav-text">通过可视化工具连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87shell%E8%BF%9E%E6%8E%A5"><span class="nav-number">4.2.</span> <span class="nav-text">通过shell连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">4.3.</span> <span class="nav-text">创建数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">4.4.</span> <span class="nav-text">删除数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E9%9B%86%E5%90%88"><span class="nav-number">4.5.</span> <span class="nav-text">创建集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E9%9B%86%E5%90%88"><span class="nav-number">4.6.</span> <span class="nav-text">删除集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%92%E5%85%A5%E6%96%87%E6%A1%A3"><span class="nav-number">4.7.</span> <span class="nav-text">插入文档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3"><span class="nav-number">4.8.</span> <span class="nav-text">删除文档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E6%96%87%E6%A1%A3"><span class="nav-number">4.9.</span> <span class="nav-text">更新文档</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E6%AE%B5%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">4.9.1.</span> <span class="nav-text">字段更新操作符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">4.9.2.</span> <span class="nav-text">数组更新操作符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%8D%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">4.9.3.</span> <span class="nav-text">位更新操作符</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3"><span class="nav-number">4.10.</span> <span class="nav-text">查询文档</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.10.1.</span> <span class="nav-text">条件查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AND%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.10.2.</span> <span class="nav-text">AND查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#OR%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.10.3.</span> <span class="nav-text">OR查询</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#type-%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">4.11.</span> <span class="nav-text">$type 操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#limit%E4%B8%8Eskip%E6%96%B9%E6%B3%95"><span class="nav-number">4.12.</span> <span class="nav-text">limit与skip方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sort%E6%8E%92%E5%BA%8F"><span class="nav-number">4.13.</span> <span class="nav-text">sort排序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95"><span class="nav-number">5.</span> <span class="nav-text">索引</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9B%E5%BB%BA%E7%AE%A1%E7%90%86%E5%91%98"><span class="nav-number">6.</span> <span class="nav-text">数据库创建管理员</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MongoDB%E7%9B%91%E6%8E%A7"><span class="nav-number">7.</span> <span class="nav-text">MongoDB监控</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E6%93%8D%E4%BD%9C"><span class="nav-number">8.</span> <span class="nav-text">其他操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81"><span class="nav-number">8.1.</span> <span class="nav-text">修改密码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%81%9C%E6%AD%A2mongodb"><span class="nav-number">8.2.</span> <span class="nav-text">停止mongodb</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE"><span class="nav-number">8.3.</span> <span class="nav-text">导出数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">8.4.</span> <span class="nav-text">导入数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">9.</span> <span class="nav-text">参考</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="WMH"
      src="/images/avatar2.png">
  <p class="site-author-name" itemprop="name">WMH</p>
  <div class="site-description" itemprop="description">just code it</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">101</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">55</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/wangminghuan" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;wangminghuan" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:m.h.wang@foxmail.com" title="E-Mail → mailto:m.h.wang@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weblog.wangminghuan.cn/" title="WebSite → https:&#x2F;&#x2F;weblog.wangminghuan.cn" rel="noopener" target="_blank"><i class="fa fa-book fa-fw"></i>WebSite</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/1657970003?topnav=1&wvr=6&topsug=1&is_all=1" title="微博 → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;1657970003?topnav&#x3D;1&amp;wvr&#x3D;6&amp;topsug&#x3D;1&amp;is_all&#x3D;1" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>微博</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangminghuan.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-2-MongoDB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.png">
      <meta itemprop="name" content="WMH">
      <meta itemprop="description" content="just code it">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WMH's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          数据库系列-2-MongoDB
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-01-21 10:02:36" itemprop="dateCreated datePublished" datetime="2020-01-21T10:02:36+00:00">2020-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-17 10:04:10" itemprop="dateModified" datetime="2022-05-17T10:04:10+00:00">2022-05-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>NoSQL用于超大规模数据的存储。（例如谷歌或Facebook每天为他们的用户收集万亿比特的数据）。这些类型的数据存储不需要固定的模式，无需多余操作就可以横向扩展。</p>
<p>随着前端技术的不断迭代，代表MongoDB（文档数据库），Express（Web服务器），AngularJS（前端框架）和Node.js（后端JavaScript运行时）的MEAN堆栈开始流行。除其他原因外，MEAN堆栈很有吸引力，因为您需要了解的唯一语言是JavaScript。与等效的LAMP/LNMP堆栈相比，它还需要更少的RAM。</p>
<p>MongoDB无疑是NoSQL数据库中最受欢迎的数据库。它的文档数据模型为开发人员提供了极大的灵活性，而其分布式体系结构则提供了很好的可伸缩性。因此，通常选择MongoDB用于必须管理大量数据，得益于水平可伸缩性并处理不适合关系模型的数据结构的应用程序。</p>
<p>MongoDB 是由C++语言编写的，是一个基于分布式文件存储的开源数据库系统,旨在为WEB应用提供可扩展的高性能数据存储解决方案。在其之上还具有一个基于图形的存储。MongoDB实际上并不存储JSON：它存储BSON（BSON 是一种类似 JSON 的二进制形式的存储格式，是 Binary JSON 的简称），该扩展了JSON表示（字符串）以包括其他类型，例如int，long，date，浮点，decimal128和地理空间坐标等。</p>
<span id="more"></span>
<h2 id="MongoDB的安装"><a href="#MongoDB的安装" class="headerlink" title="MongoDB的安装"></a>MongoDB的安装</h2><p>MongoDB在阿里云(<code>CentOS Linux release 7.6.1810</code>)的安装流程如下：</p>
<h3 id="获取压缩包"><a href="#获取压缩包" class="headerlink" title="获取压缩包"></a>获取压缩包</h3><pre><code>wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-4.2.2.tgz
</code></pre>
<h3 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h3><pre><code>tar -zxvf mongodb-linux-x86_64-rhel70-4.2.2
</code></pre>
<h3 id="将解压包拷贝到指定目录"><a href="#将解压包拷贝到指定目录" class="headerlink" title="将解压包拷贝到指定目录"></a>将解压包拷贝到指定目录</h3><pre><code>mv  mongodb-linux-x86_64-rhel70-4.2.2/ /usr/local/mongodb       
</code></pre>
<h3 id="创建数据存储路径"><a href="#创建数据存储路径" class="headerlink" title="创建数据存储路径"></a>创建数据存储路径</h3><pre><code>mkdir -p /data/db
</code></pre>
<h3 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h3><p><code>/etc/mongod.conf</code> 文件配置如下（不存在时，自己手动新建）</p>
<pre><code>dbpath = /data/db  #数据存储目录
logpath = /data/logs/mongodb.log # 日志目录
fork = true  # 后台进程启动
auth=true    # 开启验证
port = 3001  # 端口号  
bind_ip=0.0.0.0 # 对外访问
</code></pre>
<h3 id="通过指定配置启动"><a href="#通过指定配置启动" class="headerlink" title="通过指定配置启动"></a>通过指定配置启动</h3><p>确保<code>mongod.conf</code>中的dbpath与logpath对应目录存在，启动数据库：</p>
<pre><code>./mongod -f /etc/mongod.conf
</code></pre>
<h3 id="mongod-与-mongo-命令"><a href="#mongod-与-mongo-命令" class="headerlink" title="mongod 与 mongo 命令"></a>mongod 与 mongo 命令</h3><p> 前者是启用MongoDB进程，后者是对MongoDB进行连接操作</p>
<h3 id="win10-下的安装"><a href="#win10-下的安装" class="headerlink" title="win10 下的安装"></a>win10 下的安装</h3><p>可参照<a target="_blank" rel="noopener" href="https://www.cnblogs.com/nangezi/p/11279401.html">MongoDB的安装，mongod和mongo的区别</a>进行设置，自己win10上安装时作为window service服务一直无法启动，无奈只好通过命令行手动启动 <code>mongod --dbpath &quot;D:/MongoDB/Server/4.4/data/db&quot;</code></p>
<h2 id="MongoDB中的概念"><a href="#MongoDB中的概念" class="headerlink" title="MongoDB中的概念"></a>MongoDB中的概念</h2><p>| RDBMS    | MongoDB  |<br>| —— | —— | —— |<br>| 数据库 | 数据库 |<br>| 表格 | 集合 |<br>| 行 | 文档 |<br>| 列 | 字段 |<br>| 表联合 | 嵌入文档 |<br>| 主键 | 主键 (MongoDB 提供了 key 为 _id ) |</p>
<h2 id="MongoDB的使用"><a href="#MongoDB的使用" class="headerlink" title="MongoDB的使用"></a>MongoDB的使用</h2><p>数据库安装完毕后，默认是有三个数据库的，这些数据库名是保留的，可以直接访问这些有特殊作用的数据库。</p>
<pre><code>&gt; show dbs
admin   0.000GB
config  0.000GB
local   0.000GB
</code></pre>
<ul>
<li>admin： 从权限的角度来看，这是”root”数据库。要是将一个用户添加到这个数据库，这个用户自动继承所有数据库的权限。一些特定的服务器端命令也只能从这个数据库运行，比如列出所有的数据库或者关闭服务器。  </li>
<li>local: 这个数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合。 </li>
<li>config: 当Mongo用于分片设置时，config数据库在内部使用，用于保存分片的相关信息。  </li>
</ul>
<p>如果执行 <code>show dbs</code> 返回为空，说明开启的数据库认证，但是没有正确登录访问，此时需要切换到admin数据库，执行添加操作：</p>
<pre><code>use admin

db.createUser(&#123;user:&quot;admin&quot;,pwd:&quot;admin&quot;,roles:[&quot;root&quot;]&#125;)
</code></pre>
<p>此时再通过用户名密码连接，即可正常展示，如果没有开启认证，强烈建议开启 <code>./mongod --auth</code></p>
<p><img src="1.png"></p>
<h3 id="通过可视化工具连接"><a href="#通过可视化工具连接" class="headerlink" title="通过可视化工具连接"></a>通过可视化工具连接</h3><p>本文中使用的可视化工具为<a target="_blank" rel="noopener" href="https://robomongo.org/">Robo 3T</a>，</p>
<h3 id="通过shell连接"><a href="#通过shell连接" class="headerlink" title="通过shell连接"></a>通过shell连接</h3><p>进入mongodb安装目录（如：/usr/local/mongodb/bin), 执行以下命令：</p>
<pre><code> ./mongo --port 3001
</code></pre>
<p>如果添加账号管理后需通过以下方式连接：</p>
<pre><code> ./mongo  --port 3001 -u admin -p xxx
</code></pre>
<p>ps: 如果通过进程守护方式启动，依旧可以通过此方式再次进入shell</p>
<p>如果需要通过进程守护方式启动</p>
<pre><code> ./mongo --fork --port 3001 -u admin -p xxx  
</code></pre>
<h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><pre><code>  use code
</code></pre>
<p>但此时创建的数据库 code 并不在数据库的列表中， 要显示它，我们需要向 code 数据库插入一些数据。（ps: MongoDB 中默认的数据库为 test，如果你没有创建新的数据库，将默认使用test数据库）</p>
<h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><pre><code>  db.dropDatabase()
</code></pre>
<p>会删除当前use的数据库。</p>
<h3 id="创建集合"><a href="#创建集合" class="headerlink" title="创建集合"></a>创建集合</h3><p>集合的概念类似MySql中的“表”，当插入一些文档时，MongoDB 会自动创建集合：</p>
<pre><code>  db.city.insert(&#123;&quot;name&quot;:&quot;郑州&quot;&#125;)
</code></pre>
<p>自动创建了集合city</p>
<p>我们也可以显式创造集合：</p>
<pre><code>  db.createCollection(&quot;area&quot;)
</code></pre>
<p><img src="2.png"></p>
<p>查询当前数据库下，集合个数：</p>
<pre><code>   &gt; db.city.count();
   2
</code></pre>
<p>查询当前数据库下，集合列表：</p>
<pre><code>   &gt; show collections;
   city
   area
</code></pre>
<p>或：</p>
<pre><code>   &gt; show tables
   city
   area
</code></pre>
<h3 id="删除集合"><a href="#删除集合" class="headerlink" title="删除集合"></a>删除集合</h3><pre><code>&gt; db.area.drop() // 删除集合area
true

&gt; show tables // 查看当前集合
city
</code></pre>
<p>area集合已经被删除</p>
<h3 id="插入文档"><a href="#插入文档" class="headerlink" title="插入文档"></a>插入文档</h3><p>文档的数据结构和 JSON 基本一样。所有存储在集合中的数据都是 BSON 格式。</p>
<p>使用 insert() 或 save() 方法向集合中插入文档：</p>
<pre><code>db.city.insert(&#123;
    name: &#39;北京&#39;, 
    code: &quot;001&quot;,
    description: &#39;中华人民共和国首都&#39;,
    people: 2154.2*10000,
    tags: [&#39;政治中心&#39;, &#39;文化中心&#39;],
    isCenter: true
&#125;)
</code></pre>
<p><img src="3.png"></p>
<p><code>save()</code> 方法类似于 <code>insert()</code> 方法。如果指定 _id 字段，则会更新该 _id 的数据，不指定话功能同<code>insert()</code>方法:</p>
<pre><code>    db.city.save(&#123;
        _id:ObjectId(&quot;5e280f0f3a83e53738ebd7c7&quot;),
        name: &#39;北京&#39;, 
        code: &quot;100&quot;
    &#125;)
</code></pre>
<p><code>insert()</code> 方法如果指定的<code>_id</code>字段不存在则新建，如果存在就会报错，不会像<code>save()</code>方法一样更新数据</p>
<p>下表为MongoDB中常用的几种数据类型：</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>String</td>
<td>字符串。存储数据常用的数据类型。在 MongoDB 中，UTF-8 编码的字符串才是合法的。</td>
</tr>
<tr>
<td>Integer</td>
<td>整型数值。用于存储数值。根据你所采用的服务器，可分为 32 位或 64 位。</td>
</tr>
<tr>
<td>Boolean</td>
<td>布尔值。用于存储布尔值（真/假）。</td>
</tr>
<tr>
<td>Double</td>
<td>双精度浮点值。用于存储浮点值。</td>
</tr>
<tr>
<td>Min/Max keys</td>
<td>将一个值与 BSON（二进制的 JSON）元素的最低值和最高值相对比。</td>
</tr>
<tr>
<td>Array</td>
<td>用于将数组或列表或多个值存储为一个键。</td>
</tr>
<tr>
<td>Timestamp</td>
<td>时间戳。记录文档修改或添加的具体时间。</td>
</tr>
<tr>
<td>Object</td>
<td>用于内嵌文档。</td>
</tr>
<tr>
<td>Null</td>
<td>用于创建空值。</td>
</tr>
<tr>
<td>Symbol</td>
<td>符号。该数据类型基本上等同于字符串类型，但不同的是，它一般用于采用特殊符号类型的语言。</td>
</tr>
<tr>
<td>Date</td>
<td>日期时间。用 UNIX 时间格式来存储当前日期或时间。你可以指定自己的日期时间：创建 Date 对象，传入年月日信息。</td>
</tr>
<tr>
<td>Object ID</td>
<td>对象 ID。用于创建文档的 ID。</td>
</tr>
<tr>
<td>Binary Data</td>
<td>二进制数据。用于存储二进制数据。</td>
</tr>
<tr>
<td>Code</td>
<td>代码类型。用于在文档中存储 JavaScript 代码。</td>
</tr>
<tr>
<td>Regular expression</td>
<td>正则表达式类型。用于存储正则表达式。</td>
</tr>
</tbody></table>
<h3 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h3><p>删除文档使用remove方法，语法格式如下：</p>
<pre><code>db.collection.remove(
  &lt;query&gt;,
  &#123;
    justOne: &lt;boolean&gt;,
    writeConcern: &lt;document&gt;
  &#125;
)
参数说明：
- query :（可选）删除的文档的条件。
- justOne : （可选）如果设为 true 或 1，则只删除一个文档，如果不设置该参数，或使用默认值 false，则删除所有匹配条件的文档。
- writeConcern :（可选）抛出异常的级别。
</code></pre>
<p>删除<code>name:北京</code> 的文档,且只删除一个:</p>
<pre><code> &gt; db.city.remove(&#123;name:&quot;北京&quot;&#125;,1)
 WriteResult(&#123; &quot;nRemoved&quot; : 1 &#125;) //成功删除1条
</code></pre>
<p>如果想清空所有：</p>
<pre><code>  db.city.remove(&#123;&#125;)
</code></pre>
<h3 id="更新文档"><a href="#更新文档" class="headerlink" title="更新文档"></a>更新文档</h3><p>MongoDB 使用 update() 和 save() 方法来更新集合中的文档。save方法上面已经介绍过，下面为update方法语法格式：</p>
<pre><code>db.collection.update(
  &lt;query&gt;,
  &lt;update&gt;,
  &#123;
    upsert: &lt;boolean&gt;,
    multi: &lt;boolean&gt;,
    writeConcern: &lt;document&gt;
  &#125;
)

参数说明：
- query : update的查询条件，类似sql update查询内where后面的。
- update : update的对象和一些更新的操作符（参照下方表格）等，也可以理解为sql update查询内set后面的
- upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入。
- multi : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新。
- writeConcern :可选，抛出异常的级别。
</code></pre>
<h4 id="字段更新操作符"><a href="#字段更新操作符" class="headerlink" title="字段更新操作符"></a>字段更新操作符</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>$currentDate</td>
<td>将字段的值设置为当前日期，可以是Date或Timestamp</td>
</tr>
<tr>
<td>$inc</td>
<td>按指定的数量增加字段的值 increment</td>
</tr>
<tr>
<td>$min</td>
<td>仅当指定的值小于现有字段值时才更新字段</td>
</tr>
<tr>
<td>$max</td>
<td>仅当指定的值大于现有字段值时才更新字段</td>
</tr>
<tr>
<td>$mul</td>
<td>将字段的值乘以指定的量</td>
</tr>
<tr>
<td>$rename</td>
<td>重命名字段</td>
</tr>
<tr>
<td>$set</td>
<td>设置文档中字段的值</td>
</tr>
<tr>
<td>$setOnInsert</td>
<td>如果更新导致文档插入，则设置字段的值。对修改现有文档的更新操作没有影响</td>
</tr>
<tr>
<td>$unset</td>
<td>从文档中删除指定的字段</td>
</tr>
</tbody></table>
<p><code>$set</code>操作符的使用例子：</p>
<p>将所有包含name为北京的数据，更新nums字段：</p>
<pre><code>db.city.update(&#123;&quot;name&quot;:&quot;北京&quot; &#125;,&#123;$set:&#123;&quot;nums&quot;:&quot;200&quot;&#125;&#125;,&#123;multi:true&#125;)
</code></pre>
<p>结果为：</p>
<p><img src="4.png"></p>
<p><code>$currentDate</code>操作符的使用格式是：</p>
<pre><code>  &#123; $currentDate: &#123; &lt;field1&gt;: &lt;typeSpecification1&gt;, ... &#125; &#125;

  &lt;typeSpecification&gt;字段可以是一个boolean true类型设置当前字段是日期Date类型，或者一个文档&#123; $type: &quot;timestamp&quot; &#125;或者&#123; $type: &quot;date&quot; &#125;根据指定的类型设置日期，该操作是只支持小写的timestamp和小写的date。
</code></pre>
<p>它只能用于update方法中：</p>
<pre><code>db.city.update(&#123;&quot;name&quot;:&quot;北京&quot; &#125;,&#123;$currentDate: &#123;lastModified: true,&quot;time.timestamp&quot;: &#123; $type: &quot;timestamp&quot; &#125;,&quot;time.date&quot;: &#123; $type: &quot;date&quot; &#125;&#125;&#125;)
</code></pre>
<p>运行结果：</p>
<pre><code>&gt; db.city.find(&#123;&#125;)
&#123; &quot;_id&quot; : ObjectId(&quot;5e281760f7cb355794d2a86a&quot;), &quot;name&quot; : &quot;北京&quot;, &quot;code&quot; : &quot;004&quot;, &quot;description&quot; : &quot;中华人民共和国首都&quot;, &quot;people&quot; : 21542000, &quot;tags&quot; : [ &quot;政治中心&quot;, &quot;文化中心&quot;, &quot;交流中心&quot; ], &quot;isCenter&quot; : false, &quot;lastModified&quot; : ISODate(&quot;2020-02-03T15:46:21.172Z&quot;), &quot;time&quot; : &#123; &quot;date&quot; : ISODate(&quot;2020-02-03T15:46:21.172Z&quot;), &quot;timestamp&quot; : Timestamp(1580744781, 1) &#125; &#125;
</code></pre>
<p><code>$inc</code>操作符的使用：  </p>
<p>它可以接收正的和负的值，如果指定的字段不存在则$inc操作符创建这个字段并且设置这个字段的值为指定的在值；如果使用$inc操作符的字段的值如果值为null或非数字则将会报异常；</p>
<pre><code>db.city.update(&#123;&quot;name&quot;:&quot;北京&quot; &#125;,&#123;$inc: &#123;&quot;people&quot;:-1&#125;&#125;)
</code></pre>
<p><code>$min/$max</code>操作符的使用：</p>
<pre><code>db.city.update(&#123;&quot;name&quot;:&quot;北京&quot; &#125;,&#123;$inc: &#123;&quot;people&quot;:-1&#125;&#125;)
</code></pre>
<p>如果指定的字段不存在的话会设置该字段的值为指定的值；不同类型的数据比较的时候会使用BSON比较规则；</p>
<pre><code>  db.city.update(&#123;&quot;name&quot;:&quot;北京&quot; &#125;,&#123;$min: &#123;&quot;people&quot;:10&#125;&#125;)
</code></pre>
<p>运行结果：</p>
<pre><code>  &gt; db.city.find(&#123;&#125;)
  &#123; &quot;_id&quot; : ObjectId(&quot;5e281760f7cb355794d2a86a&quot;), &quot;name&quot; : &quot;北京&quot;, &quot;code&quot; : &quot;004&quot;, &quot;description&quot; : &quot;中华人民共和国首都&quot;, &quot;people&quot; : 10, &quot;tags&quot; : [ &quot;政治中心&quot;, &quot;文化中心&quot;, &quot;交流中心&quot; ], &quot;isCenter&quot; : false, &quot;lastModified&quot; : ISODate(&quot;2020-02-03T15:46:21.172Z&quot;), &quot;time&quot; : &#123; &quot;date&quot; : ISODate(&quot;2020-02-03T15:46:21.172Z&quot;), &quot;timestamp&quot; : Timestamp(1580744781, 1) &#125; &#125;
</code></pre>
<p><code>$mul</code>操作符的使用：</p>
<p>如果指定的字段在文档中不存在，$mul操作符创建字段并且设置值为0作为乘数；如果使用$inc操作符的字段的值如果值为null或非数字则将会报异常;</p>
<pre><code>  db.city.update(&#123;&quot;name&quot;:&quot;北京&quot; &#125;,&#123;$mul: &#123;&quot;ins&quot;:100, &quot;people&quot;:-1&#125;&#125;)
</code></pre>
<p>运行结果：</p>
<pre><code>&gt; db.city.find(&#123;&#125;)
&#123; &quot;_id&quot; : ObjectId(&quot;5e281760f7cb355794d2a86a&quot;), &quot;name&quot; : &quot;北京&quot;, &quot;code&quot; : &quot;004&quot;, &quot;description&quot; : &quot;中华人民共和国首都&quot;, &quot;people&quot; : -10, &quot;tags&quot; : [ &quot;政治中心&quot;, &quot;文化中心&quot;, &quot;交流中心&quot; ], &quot;isCenter&quot; : false, &quot;lastModified&quot; : ISODate(&quot;2020-02-03T15:46:21.172Z&quot;), &quot;time&quot; : &#123; &quot;date&quot; : ISODate(&quot;2020-02-03T15:46:21.172Z&quot;), &quot;timestamp&quot; : Timestamp(1580744781, 1) &#125;, &quot;ins&quot; : 0 &#125;
</code></pre>
<p><code>$rename</code>操作符的使用：</p>
<pre><code>db.city.update(&#123;&quot;name&quot;:&quot;北京&quot; &#125;,&#123;$rename: &#123;&quot;ins&quot;:&quot;newIns&quot;&#125;&#125;)
</code></pre>
<p><code>$setOnInsert</code>操作符的使用:</p>
<p>如果upsert设为true。当满足查询条件的记录存在，则不执行$setOnInsert中的操作，当满足条件的记录不存在则执行$setOnInsert操作：</p>
<pre><code>   db.city.update(&#123;_id:100 &#125;,&#123;$setOnInsert: &#123;&quot;people&quot;:55&#125;&#125;,&#123; upsert: false &#125;)
   // 查询条件不存在，且upsert为false，不更新
   
   db.city.update(&#123;_id:100 &#125;,&#123;$setOnInsert: &#123;&quot;people&quot;:55&#125;&#125;,&#123; upsert: true &#125;)
   // 查询条件不存在，且upsert为true，更新一条数据
</code></pre>
<p><code>$unset</code>操作符的使用：</p>
<pre><code>  db.city.update(&#123;&quot;name&quot;:&quot;北京&quot; &#125;,&#123;$unset:&#123;&quot;nums&quot;:&quot;10&quot;&#125;&#125;,&#123;multi:true&#125;)
  //无论nums值是多少，均可删除nums字段
</code></pre>
<h4 id="数组更新操作符"><a href="#数组更新操作符" class="headerlink" title="数组更新操作符"></a>数组更新操作符</h4><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>$</td>
<td>作为占位符，用来更新与查询条件匹配的第一个元素</td>
</tr>
<tr>
<td>$[]</td>
<td>作为占位符，用来更新与查询条件匹配的所有元素</td>
</tr>
<tr>
<td>$[&lt;identifier&gt;]</td>
<td>作为占位符，用来更新与查询条件匹配的，并且与arrayFilters条件匹配的所有元素</td>
</tr>
<tr>
<td>$addToSet</td>
<td>添加值到一个数组中去，如果数组中已经存在该值那么将不会有任何的操作</td>
</tr>
<tr>
<td>$push</td>
<td>把value追加到数组field里, 数组不存在则创建，且不会去重</td>
</tr>
<tr>
<td>$pop</td>
<td>删除数组内第一个或最后一个元素</td>
</tr>
<tr>
<td>$pull</td>
<td>从数组field内删除一个等于value的值。</td>
</tr>
<tr>
<td>$pullAll</td>
<td>用法同$pull一样，可以一次删除数组内的多个值</td>
</tr>
</tbody></table>
<p><code>$</code>操作符表示要更新的数组中的元素，且无需显式指定该元素在数组中的位置。对于文档：</p>
<pre><code>&#123; &quot;_id&quot; : 200, &quot;arr&quot; : [ 1, 2, 3, 4 ], &quot;obj&quot; : [ &#123; &quot;age&quot; : 10, &quot;name&quot; : &quot;Tom&quot; &#125;, &#123; &quot;age&quot; : 20, &quot;name&quot; : &quot;Jack&quot; &#125; ] &#125;
</code></pre>
<p>执行下面操作:</p>
<pre><code>&gt; db.city.update(&#123;_id:200,arr:3&#125;,&#123;$set:&#123;&quot;arr.$&quot;:300&#125;&#125;) //arr的3替换为300 

&gt; db.city.update(&#123;_id:200,&quot;obj.age&quot;:10&#125;,&#123;$set:&#123;&quot;obj.$.name&quot;:&quot;Leo&quot;&#125;&#125;) // obj中age为10的元素name属性改为Leo
</code></pre>
<p>运行结果：</p>
<pre><code>&gt; db.city.find(&#123;_id:200&#125;)
&#123; &quot;_id&quot; : 200, &quot;arr&quot; : [ 1, 2, 300, 4 ], &quot;obj&quot; : [ &#123; &quot;age&quot; : 10, &quot;name&quot; : &quot;Leo&quot; &#125;, &#123; &quot;age&quot; : 20, &quot;name&quot; : &quot;Jack&quot; &#125; ] &#125;
</code></pre>
<p><code>$[]</code>操作符表示要表示应修改指定数组字段中的所有元素。对于文档：</p>
<pre><code>  &#123; &quot;_id&quot; : 200, &quot;arr&quot; : [ 1, 2, 300, 4 ], &quot;obj&quot; : [ &#123; &quot;age&quot; : 10, &quot;name&quot; : &quot;Leo&quot; &#125;, &#123; &quot;age&quot; : 20, &quot;name&quot; : &quot;Jack&quot; &#125; ] &#125;
</code></pre>
<p>执行下面操作:</p>
<pre><code>&gt; db.city.update(&#123;_id:200,&quot;arr&quot;:1&#125;,&#123;$inc:&#123;&quot;arr.$[]&quot;:5&#125;&#125;)

&gt; db.city.update(&#123;_id:200&#125;,&#123;$inc:&#123;&quot;obj.$[].age&quot;:-2&#125;&#125;)
</code></pre>
<p>运行结果：</p>
<pre><code>&gt; db.city.find(&#123;_id:200&#125;)
&#123; &quot;_id&quot; : 200, &quot;arr&quot; : [ 6, 7, 305, 9 ], &quot;obj&quot; : [ &#123; &quot;age&quot; : 8, &quot;name&quot; : &quot;Leo&quot; &#125;, &#123; &quot;age&quot; : 18, &quot;name&quot; : &quot;Jack&quot; &#125; ] &#125;
</code></pre>
<p><code>$[&lt;identifier&gt;]</code>操作符则在<code>$[]</code>的基础上增加了arrayFilters字段的过滤。我们继续执行下面操作：</p>
<pre><code>&gt; db.city.update(&#123;_id:200&#125;,&#123;$inc:&#123;&quot;arr.$[element]&quot;:10&#125;&#125;,&#123; arrayFilters: [ &#123; &quot;element&quot;: &#123; $lt:100 &#125; &#125; ] &#125;)

&gt; db.city.update(&#123;_id:200&#125;,&#123;$inc:&#123;&quot;obj.$[element].age&quot;:4&#125;&#125;,&#123;arrayFilters: [ &#123; &quot;element.age&quot;: &#123; $gt: 10 &#125; &#125; ]&#125;) 
</code></pre>
<p>运行结果：</p>
<pre><code>&gt; db.city.find(&#123;_id:200&#125;)
&#123; &quot;_id&quot; : 200, &quot;arr&quot; : [ 16, 17, 305, 19 ], &quot;obj&quot; : [ &#123; &quot;age&quot; : 8, &quot;name&quot; : &quot;Leo&quot; &#125;, &#123; &quot;age&quot; : 22, &quot;name&quot; : &quot;Jack&quot; &#125; ] &#125;
</code></pre>
<p><code>$push</code>操作符要求操作的字段如果存在则必须为数组，否则会报错，它的使用：</p>
<pre><code>&gt; db.city.update(&#123;&quot;_id&quot;:101 &#125;,&#123;$push:&#123;&quot;tag&quot;:1&#125;&#125;)
</code></pre>
<p>运行结果（tag字段不存在）：</p>
<pre><code>&gt; db.city.find(&#123;&quot;_id&quot;:101 &#125;)
&#123; &quot;_id&quot; : 101, &quot;code&quot; : 8, &quot;tag&quot; : [ 1 ] &#125;
</code></pre>
<p><code>$addToSet</code>操作符的使用基本与<code>$push</code>等同，区别是<code>$addToSet</code>操作符会进行去重操作，如果添加的值已经存在，则不会添加。</p>
<pre><code>&gt; db.city.update(&#123;&quot;_id&quot;:101 &#125;,&#123;$addToSet:&#123;&quot;tag&quot;:1&#125;&#125;)
&gt; db.city.find(&#123;&quot;_id&quot;:101 &#125;)
&#123; &quot;_id&quot; : 101, &quot;code&quot; : 8, &quot;tag&quot; : [ 1 ] &#125;
</code></pre>
<p><code>$pop</code>操作符的使用：</p>
<pre><code>  &#123; $pop: &#123; &lt;field&gt;: &lt;-1 | 1&gt;, ... &#125; &#125;
  -1：删除第一个，1：删除第一个
</code></pre>
<p>对于文档：</p>
<pre><code>&#123; &quot;_id&quot; : 101, &quot;code&quot; : 8, &quot;tag&quot; : [ 1, 2, 3, 3, 4, 9 ] &#125;
</code></pre>
<p>删除第一个元素</p>
<pre><code>  &gt; db.city.update(&#123;&quot;_id&quot;:101 &#125;,&#123;$pop:&#123;&quot;tag&quot;:-1&#125;&#125;) 
  &gt; db.city.find(&#123;&quot;_id&quot;:101 &#125;)
  &#123; &quot;_id&quot; : 101, &quot;code&quot; : 8, &quot;tag&quot; : [ 2, 3, 3, 4, 9 ] &#125;  
</code></pre>
<p>删除最后一个元素</p>
<pre><code>  &gt; db.city.update(&#123;&quot;_id&quot;:101 &#125;,&#123;$pop:&#123;&quot;tag&quot;:1&#125;&#125;) 
  &gt; db.city.find(&#123;&quot;_id&quot;:101 &#125;)
  &#123; &quot;_id&quot; : 101, &quot;code&quot; : 8, &quot;tag&quot; : [ 2, 3, 3, 4] &#125;  
</code></pre>
<p><code>$pull</code>操作符的使用, 对于文档：</p>
<pre><code> &#123; &quot;_id&quot; : 101, &quot;code&quot; : 8, &quot;tag&quot; : [ 1, 2, 3, 3, 4, 9 ] &#125;
 
</code></pre>
<p>进行删除操作：</p>
<pre><code> db.city.update(&#123;&quot;_id&quot;:101 &#125;,&#123;$pull:&#123;&quot;tag&quot;:1&#125;&#125;)
</code></pre>
<p>运行结果：</p>
<pre><code>  &gt; db.city.find(&#123;&quot;_id&quot;:101 &#125;)
  &#123; &quot;_id&quot; : 101, &quot;code&quot; : 8, &quot;tag&quot; : [ 2, 3, 3, 4, 9 ] &#125;
</code></pre>
<p><code>$pullAll</code>操作符的使用，要删除的value必须放在数组内，否则会报错：</p>
<p>对于文档：</p>
<pre><code>  &#123; &quot;_id&quot; : 101, &quot;code&quot; : 8, &quot;tag&quot; : [ 2, 3, 3, 4, 9 ] &#125;
  
</code></pre>
<p>进行删除操作：</p>
<pre><code>  db.city.update(&#123;&quot;_id&quot;:101 &#125;,&#123;$pullAll:&#123;&quot;tag&quot;:[3,9]&#125;&#125;)
</code></pre>
<p>运行结果，所有的3与9均被删除：</p>
<pre><code>  &gt; db.city.find(&#123;&quot;_id&quot;:101 &#125;)
  &#123; &quot;_id&quot; : 101, &quot;code&quot; : 8, &quot;tag&quot; : [ 2, 4 ] &#125;
</code></pre>
<p>除了上述操作符外，更新操作还有几个修饰符操作</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>$each</td>
<td>使用$push或$addToSet操作符添加多个元素到数组字段中</td>
</tr>
<tr>
<td>$position</td>
<td>使用$push操作符插入数组中的数据元素的位置</td>
</tr>
<tr>
<td>$slice</td>
<td>限制使用$push操作符插入数组中的数据元素的数量</td>
</tr>
<tr>
<td>$sort</td>
<td>修改 $push 操作符</td>
</tr>
</tbody></table>
<p>例子1-同时插入多个数据：</p>
<pre><code>&gt; db.city.update(&#123;_id:300&#125;,&#123;$push:&#123;level:&#123;$each:[2,3,4,5,6]&#125;&#125;&#125;)
//结果：
&gt; db.city.find(&#123;_id:300&#125;)
&#123; &quot;_id&quot; : 300, &quot;level&quot; : [ 1, 2, 3, 4, 5, 6 ] &#125;
</code></pre>
<p>例子2-同时插入多个数据，并指定位置：</p>
<pre><code>  // $position值大于现有长度，则按目前数组长度开始追加
  &gt; db.city.update(&#123;_id:300&#125;,&#123;$push:&#123;level:&#123;$each:[2,3,4],$position:5&#125;&#125;&#125;)
  &#123; &quot;_id&quot; : 300, &quot;level&quot; : [ 1, 2, 3, 4 ] &#125;

  // $position值为负数时，则从数组最前面开始追加
  &gt; db.city.update(&#123;_id:300&#125;,&#123;$push:&#123;level:&#123;$each:[-2,-3,-4],$position:-5&#125;&#125;&#125;)
  &#123; &quot;_id&quot; : 300, &quot;level&quot; : [ -2, -3, -4, 1, 2, 3, 4 ] &#125;

  // 不超过目前现有数组长度时，则按指定位置开始追加
  &gt; db.city.update(&#123;_id:300&#125;,&#123;$push:&#123;level:&#123;$each:[0],$position:0&#125;&#125;&#125;)
  &#123; &quot;_id&quot; : 300, &quot;level&quot; : [ 0, -2, -3, -4, 1, 2, 3, 4 ] &#125;
</code></pre>
<p>例子3-同时插入多个数据，并进行截取：</p>
<p>原始数据为：<code>&#123; &quot;_id&quot; : 300, &quot;level&quot; : [ 0, -2, -3, -4, 1, 2, 3, 4 ] &#125;</code>，$slice的操作可以理解为执行$push操作后的数据再执行$slice操作：</p>
<pre><code>//大于0且小于最终数组长度时，会在指定位置开始切割数组
&gt; db.city.update(&#123;_id:300&#125;,&#123;$push:&#123;level:&#123;$each:[5,6],$slice:5&#125;&#125;&#125;)
&#123; &quot;_id&quot; : 300, &quot;level&quot; : [ 0, -2, -3, -4, 1 ] &#125;

//为负数时，则会从最终数组最后一位开始往前切割
&gt; db.city.update(&#123;_id:300&#125;,&#123;$push:&#123;level:&#123;$each:[5,6],$slice:-3&#125;&#125;&#125;)
&#123; &quot;_id&quot; : 300, &quot;level&quot; : [ 1, 5, 6 ] &#125;

//为0时则会将数组置空
&gt; db.city.update(&#123;_id:300&#125;,&#123;$push:&#123;level:&#123;$each:[5,6],$slice:0&#125;&#125;&#125;)
&#123; &quot;_id&quot; : 300, &quot;level&quot; : [ ] &#125;
</code></pre>
<p>例子4-同时插入多个数据，并按指定顺序排序($sort取值只能为1或者-1)：</p>
<pre><code>//按score正序排序
&gt; db.city.update(&#123;_id:400&#125;,&#123;$push:&#123;quiz:&#123;$each:[&#123;name:2,score:46&#125;,&#123;name:9,score:-23&#125;],$sort:&#123;score:1&#125;&#125;&#125;&#125;)
&#123; &quot;_id&quot; : 400, &quot;quiz&quot; : [ &#123; &quot;name&quot; : 9, &quot;score&quot; : -23 &#125;, &#123; &quot;name&quot; : 1, &quot;score&quot; : 34 &#125;, &#123; &quot;name&quot; : 2, &quot;score&quot; : 46 &#125; ] &#125;

//按score倒序排序
&gt; db.city.update(&#123;_id:400&#125;,&#123;$push:&#123;quiz:&#123;$each:[],$sort:&#123;score:-1&#125;&#125;&#125;&#125;)
&#123; &quot;_id&quot; : 400, &quot;quiz&quot; : [ &#123; &quot;name&quot; : 2, &quot;score&quot; : 46 &#125;, &#123; &quot;name&quot; : 1, &quot;score&quot; : 34 &#125;, &#123; &quot;name&quot; : 9, &quot;score&quot; : -23 &#125; ] &#125;
</code></pre>
<h4 id="位更新操作符"><a href="#位更新操作符" class="headerlink" title="位更新操作符"></a>位更新操作符</h4><p><code>$bit</code>运算符执行字段的按位更新，操作符的使用格式是：</p>
<pre><code>  &#123; $bit: &#123; &lt;field&gt;: &#123; &lt;and|or|xor&gt;: &lt;int&gt; &#125; &#125; &#125;
</code></pre>
<p>例如原始数据为：</p>
<pre><code>  &#123; &quot;_id&quot; : 101, &quot;code&quot; : 13 &#125;
</code></pre>
<p>执行与运算：</p>
<pre><code>  db.city.update(&#123;&quot;_id&quot;:101 &#125;,&#123;$bit: &#123;&quot;code&quot;:&#123;and:NumberInt(10)&#125;&#125;&#125;)
</code></pre>
<p>执行结果：</p>
<pre><code>  &#123; &quot;_id&quot; : 101, &quot;code&quot; : 8 &#125;
</code></pre>
<p>内部执行为：</p>
<pre><code>  1101
  1010
  ----
  1000
</code></pre>
<h3 id="查询文档"><a href="#查询文档" class="headerlink" title="查询文档"></a>查询文档</h3><p>查询文档使用find方法，语法格式如下：</p>
<pre><code>db.collection.find(query, projection)

参数说明：
- query ：可选，使用查询操作符指定查询条件
- projection ：可选，使用投影操作符指定返回的键。查询时返回文档中所有键值， 只需省略该参数即可（默认省略）。
</code></pre>
<p>例如，查询city集合下所有数据：</p>
<pre><code>&gt; db.city.find()
&#123; &quot;_id&quot; : ObjectId(&quot;5e281760f7cb355794d2a86a&quot;), &quot;name&quot; : &quot;北京&quot;, &quot;code&quot; : &quot;004&quot;, &quot;description&quot; : &quot;中华人民共和国首都&quot;, &quot;people&quot; : 21542000, &quot;tags&quot; : [ &quot;政治中心&quot;, &quot;文化中心&quot;, &quot;交流中心&quot; ], &quot;isCenter&quot; : false &#125;
&#123; &quot;_id&quot; : ObjectId(&quot;5e2818e9f7cb355794d2a86b&quot;), &quot;name&quot; : &quot;北京&quot;, &quot;code&quot; : &quot;004&quot;, &quot;description&quot; : &quot;中华人民共和国首都&quot;, &quot;people&quot; : 21542000, &quot;tags&quot; : [ &quot;政治中心&quot;, &quot;文化中心&quot;, &quot;交流中心&quot; ], &quot;isCenter&quot; : true &#125;
</code></pre>
<p>如果你需要以易读（格式化）的方式来读取数据，可以使用 pretty() 方法：</p>
<pre><code>&gt; db.city.find().pretty()
&#123;
  &quot;_id&quot; : ObjectId(&quot;5e281760f7cb355794d2a86a&quot;),
  &quot;name&quot; : &quot;北京&quot;,
  &quot;code&quot; : &quot;004&quot;,
  &quot;description&quot; : &quot;中华人民共和国首都&quot;,
  &quot;people&quot; : 21542000,
  &quot;tags&quot; : [
    &quot;政治中心&quot;,
    &quot;文化中心&quot;,
    &quot;交流中心&quot;
  ],
  &quot;isCenter&quot; : false
&#125;
&#123;
  &quot;_id&quot; : ObjectId(&quot;5e2818e9f7cb355794d2a86b&quot;),
  &quot;name&quot; : &quot;北京&quot;,
  &quot;code&quot; : &quot;004&quot;,
  &quot;description&quot; : &quot;中华人民共和国首都&quot;,
  &quot;people&quot; : 21542000,
  &quot;tags&quot; : [
    &quot;政治中心&quot;,
    &quot;文化中心&quot;,
    &quot;交流中心&quot;
  ],
  &quot;isCenter&quot; : true
&#125;
</code></pre>
<h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><p>MongoDB支持类似MySql的where语句的条件查询：</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>格式</th>
<th>例子</th>
<th>RDBMS中的类似语句</th>
<th>条件缩写解释</th>
</tr>
</thead>
<tbody><tr>
<td>等于</td>
<td>{&lt;key&gt;:&lt;value&gt;}</td>
<td>db.city.find({“name”:”北京”})</td>
<td>where name = ‘北京’</td>
<td>equal</td>
</tr>
<tr>
<td>小于</td>
<td>{&lt;key&gt;:{$lt:&lt;value&gt;}}</td>
<td>db.city.find({“nums”:{$lt:50}})</td>
<td>where nums &lt; 50</td>
<td>less than</td>
</tr>
<tr>
<td>小于或等于</td>
<td>{&lt;key&gt;:{$lte:&lt;value&gt;}}</td>
<td>db.city.find({“nums”:{$lte:50}})</td>
<td>where nums &lt;= 50</td>
<td>lt equal</td>
</tr>
<tr>
<td>大于</td>
<td>{&lt;key&gt;:{$gt:&lt;value&gt;}}</td>
<td>db.city.find({“nums”:{$gt:50}})</td>
<td>where nums &gt; 50</td>
<td>greater than</td>
</tr>
<tr>
<td>大于或等于</td>
<td>{&lt;key&gt;:{$gte:&lt;value&gt;}}</td>
<td>db.city.find({“nums”:{$gte:50}})</td>
<td>where nums &gt;= 50</td>
<td>gt equal</td>
</tr>
<tr>
<td>不等于</td>
<td>{&lt;key&gt;:{$ne:&lt;value&gt;}}</td>
<td>db.city.find({“nums”:{$ne:50}})</td>
<td>where nums != 50</td>
<td>not equal</td>
</tr>
</tbody></table>
<h4 id="AND查询"><a href="#AND查询" class="headerlink" title="AND查询"></a>AND查询</h4><p>MongoDB 的 find() 方法可以传入多个键(key)，每个键(key)以逗号隔开:</p>
<pre><code>&gt; db.city.find(&#123;&quot;isCenter&quot;:&#123;$ne:false&#125;,&quot;name&quot;:&quot;北京&quot;&#125;).pretty()
&#123;
  &quot;_id&quot; : ObjectId(&quot;5e2818e9f7cb355794d2a86b&quot;),
  &quot;name&quot; : &quot;北京&quot;,
  &quot;code&quot; : &quot;004&quot;,
  &quot;description&quot; : &quot;中华人民共和国首都&quot;,
  &quot;people&quot; : 21542000,
  &quot;tags&quot; : [
    &quot;政治中心&quot;,
    &quot;文化中心&quot;,
    &quot;交流中心&quot;
  ],
  &quot;isCenter&quot; : true
&#125;
</code></pre>
<h4 id="OR查询"><a href="#OR查询" class="headerlink" title="OR查询"></a>OR查询</h4><p>例如，我们查询city集合中，code为004，且包含 isCenter为true 或 name为天津 的数据（AND 和 OR 联合使用）:</p>
<pre><code>&gt; db.city.find(&#123;&quot;code&quot;:&quot;004&quot;,$or:[&#123;&quot;isCenter&quot;:true&#125;,&#123;&quot;name&quot;:&quot;天津&quot;&#125;]&#125;).pretty()
&#123;
  &quot;_id&quot; : ObjectId(&quot;5e2818e9f7cb355794d2a86b&quot;),
  &quot;name&quot; : &quot;北京&quot;,
  &quot;code&quot; : &quot;004&quot;,
  &quot;description&quot; : &quot;中华人民共和国首都&quot;,
  &quot;people&quot; : 21542000,
  &quot;tags&quot; : [
    &quot;政治中心&quot;,
    &quot;文化中心&quot;,
    &quot;交流中心&quot;
  ],
  &quot;isCenter&quot; : true
&#125;
&#123;
  &quot;_id&quot; : ObjectId(&quot;5e36cc388a5af806fe1893ae&quot;),
  &quot;name&quot; : &quot;天津&quot;,
  &quot;code&quot; : &quot;004&quot;
&#125;
</code></pre>
<h3 id="type-操作符"><a href="#type-操作符" class="headerlink" title="$type 操作符"></a>$type 操作符</h3><p>$type操作符是基于BSON类型来检索集合中匹配的数据类型，并返回结果。具体数值对应的数据类型<a target="_blank" rel="noopener" href="https://www.runoob.com/mongodb/mongodb-operators-type.html">参考此处</a></p>
<p>例如我们查询所有id为Double类型的文档，结果如下：</p>
<p><img src="5.png"></p>
<h3 id="limit与skip方法"><a href="#limit与skip方法" class="headerlink" title="limit与skip方法"></a>limit与skip方法</h3><p>limit()方法接受一个数字参数，该参数指定从MongoDB中读取的记录条数。skip()方法来跳过指定数量的数据，skip方法同样接受一个数字参数作为跳过的记录条数：</p>
<p><img src="6.png"></p>
<h3 id="sort排序"><a href="#sort排序" class="headerlink" title="sort排序"></a>sort排序</h3><p>sort() 方法可以通过参数指定排序的字段，并使用 1 和 -1 来指定排序的方式，其中 1 为升序排列，而 -1 是用于降序排列。</p>
<p><img src="7.png"></p>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><p>MongoDB 在创建集合期间在_id字段上创建了唯一索引。该索引可防止客户端插入两个_id字段值相同的文档。_id字段的索引不能删除。<br>MongoDB允许使用createIndex方法来手动创建索引，基本语法格式如下所示：</p>
<pre><code>db.collection.createIndex(keys, options)
</code></pre>
<p>Key 值为你要创建的索引字段，1 为指定按升序创建索引，-1 为按降序创建索引。</p>
<p>例如创建title作为索引</p>
<pre><code>db.col.createIndex(&#123;&quot;title&quot;:1&#125;)
</code></pre>
<p>也可以设置使用多个字段创建索引（关系型数据库中称作复合索引）。</p>
<pre><code>db.col.createIndex(&#123;&quot;title&quot;:1,&quot;description&quot;:-1&#125;)
</code></pre>
<p>关于options的具体配置可<a target="_blank" rel="noopener" href="https://www.runoob.com/mongodb/mongodb-indexing.html">参见此处</a></p>
<h2 id="数据库创建管理员"><a href="#数据库创建管理员" class="headerlink" title="数据库创建管理员"></a>数据库创建管理员</h2><p>截止到目前，我们的数据库是对外开放的，意味着任何人只要拿到数据库地址，均可连接访问，显然，这是极其危险的，我们需要对数据库的访问加以限制：</p>
<p>切换到admin数据库：</p>
<pre><code>&gt; use admin
switched to db admin
</code></pre>
<p>创建管理员账号：</p>
<pre><code>&gt; db.createUser(&#123;user: &#39;admin&#39;, pwd: &#39;xxx&#39;,roles:[&#123;role: &#39;root&#39;, db: &#39;admin&#39;&#125;]&#125;)
</code></pre>
<p>此时我们需要重启下数据库（基于<code>/usr/local/mongodb/bin</code>目录）：</p>
<pre><code> ./mongod --shutdown  //关闭数据库
</code></pre>
<p>开启<code>/etc/mongod.conf</code>下的用户认证:</p>
<pre><code>  dbpath = /data/db  #数据存储目录
  logpath = /data/logs/mongodb.log # 日志目录
  fork = true  # 后台进程启动
  auth=true    # 开启验证
  port = 3001  # 端口号  
  bind_ip=0.0.0.0 # 对外访问
</code></pre>
<p>启动数据库：</p>
<pre><code>./mongod -f /etc/mongod.conf
</code></pre>
<p>这样便完成了用户校验功能。</p>
<h2 id="MongoDB监控"><a href="#MongoDB监控" class="headerlink" title="MongoDB监控"></a>MongoDB监控</h2><p>mongostat是mongodb自带的状态检测工具，在命令行下使用。它会间隔固定时间获取mongodb的当前运行状态，并输出。可以shell下执行：</p>
<pre><code>./mongostat --port 3001 -u admin -p xxxx  --authenticationDatabase=admin
</code></pre>
<p>运行结果：</p>
<p><img src="8.png"></p>
<h2 id="其他操作"><a href="#其他操作" class="headerlink" title="其他操作"></a>其他操作</h2><h3 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h3><pre><code>use admin
db.changeUserPassword(&#39;admin&#39;,&#39;12xxx&#39;);
</code></pre>
<h3 id="停止mongodb"><a href="#停止mongodb" class="headerlink" title="停止mongodb"></a>停止mongodb</h3><pre><code>db.shutdownServer()
</code></pre>
<p>尽量避免使用看kill命令来操作</p>
<h3 id="导出数据"><a href="#导出数据" class="headerlink" title="导出数据"></a>导出数据</h3><p>mongodb官网有配套的导出工具：<code>mongoexport</code>, 语法如下：</p>
<pre><code>  mongoexport -d dbname -c collectionname -o file --type json/csv -f field
</code></pre>
<p>参数说明：</p>
<pre><code>  -d ：数据库名
  -c ：collection名
  -o ：输出的文件名
  --type ： 输出的格式，默认为json
  -f ：输出的字段，如果-type为csv，则需要加上-f &quot;字段名&quot;
</code></pre>
<p>例子：</p>
<pre><code>   ./mongoexport -d manage -c orders -o d:/dbs/manage/order.json  # 进入安装目录bin下执行
</code></pre>
<p><img src="./9.png"></p>
<h3 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a>导入数据</h3><p>mongodb官网有配套的导出工具：<code>mongoimport</code>, 语法如下：</p>
<pre><code>  mongoimport -d dbname -c collectionname --file filename --headerline --type json/csv -f field
  
</code></pre>
<p>参数说明：</p>
<pre><code>  -d ：数据库名
  -c ：collection名
  --type ：导入的格式默认json
  -f ：导入的字段名
  --headerline ：如果导入的格式是csv，则可以使用第一行的标题作为导入的字段
  --file ：要导入的文件
</code></pre>
<p>例子：</p>
<pre><code>  ./mongoimport --port 7000 -d manage -c orders --file /home/mongodb/dbs/manage/order.json  # 进入安装目录bin下执行
</code></pre>
<p><img src="./10.png"></p>
<p>导入导出过程中需启动mongodb服务，操作过程中无需密码，如果不是默认端口，需要指定端口。window下安装目录若无相关工具，请进入<a target="_blank" rel="noopener" href="https://www.mongodb.com/try/download/database-tools">官网下载页面</a>进行下载安装</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/92898439">知乎专栏-MongoDB与MySQL：如何选择</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/reference/operator/update/">MongoDB官方文档-update方法</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/qingtianyu2015/p/5968400.html">MongoDB导入导出以及数据库备份</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/noSql/" rel="tag"># noSql</a>
              <a href="/tags/MongoDB/" rel="tag"># MongoDB</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E5%88%97-1-MySql/" rel="prev" title="数据库系列-1-MySql">
                  <i class="fa fa-chevron-left"></i> 数据库系列-1-MySql
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/react%E7%B3%BB%E5%88%97-1-hooks/" rel="next" title="react系列-1-hooks">
                  react系列-1-hooks <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WMH</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://static.wangminghuan.cn/cdn/animejs@3.2.1/anime.min.js"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://static.wangminghuan.cn/cdn/hexo-generator-searchdb/search.js"></script>
<script src="/js/third-party/search/local-search.js"></script>





  





</body>
</html>
